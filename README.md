# Auth App (Nest.js + React)

–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ø—Ä–æ—Å—Ç–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏.

- **Backend:** Nest.js + TypeScript + PostgreSQL + Prisma
- **Frontend:** React + Vite + TypeScript
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** —Å–µ—Å—Å–∏–æ–Ω–Ω–∞—è cookie `sid` (httpOnly), —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ –ë–î
- **–ü–∞—Ä–æ–ª–∏:** —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∑–∞—Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (bcrypt-–∞–ª–≥–æ—Ä–∏—Ç–º)

---

## 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

- Node.js 20+
- npm / pnpm
- PostgreSQL 14+ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker)

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Docker:

- Docker Desktop
- Docker Compose (`docker compose ...`)

---

## 2. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ Docker (backend + postgres)

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`auth-app/`) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ñ–∞–π–ª:

- `docker-compose.yml`

–∞ –≤ –ø–∞–ø–∫–µ `backend/` ‚Äî `Dockerfile`.

### 2.1. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ—Ä–Ω–µ:

docker compose up --build

## 2.2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ (—á–µ—Ä–µ–∑ Docker)

–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–∞–ø–∫–∏ auth_app –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

docker exec -it auth-postgres psql -U postgres -d authdb

–∏ –≤—Å—Ç–∞–≤—å—Ç–µ Sql

INSERT INTO "User" ("email", "passwordHash")
VALUES (
  'test@example.com',
  '$2b$12$ULQ/FlA/3AvqQHI27y6uf.ZUHlA6Sijb2tWOT4VvVeSDixMVZhkIC'
);

–≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

email: test@example.com
password: password123

–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∑–∞–ø–∏—Å—å –ø–æ—è–≤–∏–ª–∞—Å—å:

SELECT * FROM "User";


## 3.1 –ó–∞–ø—É—Å–∫ frontend (React + Vite) (–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ —É–ø–∞–∫–æ–≤–∞–Ω –≤ Docker ‚Äî –µ–≥–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ.)

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É frontend:

cd auth-app/frontend

–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

npm install

–ó–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä:

npm run dev

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ: 

http://localhost:5173/auth

üîê 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4.1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /auth –≤–≤–µ–¥–∏—Ç–µ:

email: test@example.com

password: password123

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞:

—Å–æ–∑–¥–∞—ë—Ç—Å—è cookie sid (httpOnly),

–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ /,

–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å GET /api/profile.

4.2. –î–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (/)

–ù–∞ –≥–ª–∞–≤–Ω–æ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:

–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ,

—Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –ª–æ–≥–∏–Ω–∞–º–∏,

–∫–Ω–æ–ø–∫–∞ Logout.

4.3. Logout

–ù–∞–∂–º–∏—Ç–µ Logout ‚Üí cookie —É–¥–∞–ª—è–µ—Ç—Å—è ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth.

4.4. –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

–ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å / –±–µ–∑ –ª–æ–≥–∏–Ω–∞ ‚Üí frontend –≤—ã–ø–æ–ª–Ω–∏—Ç GET /api/profile, –ø–æ–ª—É—á–∏—Ç 401 ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ /auth.
